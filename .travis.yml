language: python
python:
  - "3.4"

install: python setup.py install

services: rabbitmq

before_script:
  - pushd test_project
  - celery -A cosmic_ray.tasks.worker worker &
  - popd

script:
  - py.test cosmic_ray/test
  - cd test_project
  - cosmic-ray load cosmic-ray.unittest.conf
  - cosmic-ray report adam_tests.unittest
  - cosmic-ray load cosmic-ray.pytest.conf
  - cosmic-ray report adam_tests.pytest